<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PKK XI SMK — Perencanaan Produksi</title>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Stylesheet lokal -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="brand">PKK</div>
      <div class="title">
        <h1>Perencanaan Produksi — PKK Kelas XI SMK</h1>
        <p>Materi, worksheet, slide, data demo & modul praktik</p>
      </div>
    </header>

    <nav class="nav">
      <button class="tab-btn" data-tab="home">Beranda</button>
      <button class="tab-btn" data-tab="worksheet">Worksheet</button>
      <button class="tab-btn" data-tab="slide">Slide Guru</button>
      <button class="tab-btn" data-tab="app">Aplikasi Praktik</button>
      <button class="tab-btn" data-tab="data">Data Demo</button>

      <div class="right-actions">
        <button id="print-btn">Print</button>
        <button id="export-json">Export Data</button>
      </div>
    </nav>

    <main>
      <!-- HOME -->
      <section id="home" class="tab-panel">
        <h2>Selamat datang</h2>
        <p>Gunakan worksheet, slide, muat dataset, lalu praktik di modul. Grafik membantu visualisasi permintaan dan peramalan.</p>
      </section>

      <!-- WORKSHEET -->
      <section id="worksheet" class="tab-panel hidden">
        <h2>Worksheet Siswa (Ringkas)</h2>
        <ol>
          <li>Pertemuan 1: Konsep dasar (permintaan, kapasitas, persediaan)</li>
          <li>Pertemuan 2: Peramalan sederhana (SMA & WMA)</li>
          <li>Pertemuan 3: MRP sederhana (BOM → Net → Planned Release)</li>
          <li>Pertemuan 4: Penjadwalan FCFS & ABC</li>
          <li>Pertemuan 5: Kuis & Presentasi</li>
        </ol>
        <p>Rumus singkat:</p>
        <ul>
          <li>SMA window 3 = (Dt + Dt-1 + Dt-2) / 3</li>
          <li>WMA (0.5,0.3,0.2) = 0.5*Dt + 0.3*Dt-1 + 0.2*Dt-2</li>
        </ul>
        <button id="print-worksheet">Print Worksheet</button>
      </section>

      <!-- SLIDE -->
      <section id="slide" class="tab-panel hidden">
        <h2>Slide Guru</h2>
        <div id="slide-content">
          <h3>Perencanaan Produksi — Ringkasan</h3>
          <p>5 pertemuan — fokus praktek dan keputusan sederhana (kapan pesan bahan, berapa produksi).</p>
        </div>
        <button id="open-slide">Tampilkan Layar Penuh</button>
      </section>

      <!-- APP -->
      <section id="app" class="tab-panel hidden">
        <h2>Aplikasi Praktik</h2>

        <div class="subnav">
          <button class="sub-btn" data-sub="dashboard">Dasbor</button>
          <button class="sub-btn" data-sub="forecast">Peramalan</button>
          <button class="sub-btn" data-sub="mrp">MRP</button>
          <button class="sub-btn" data-sub="schedule">Penjadwalan</button>
          <button class="sub-btn" data-sub="abc">ABC</button>
          <button class="sub-btn" data-sub="quiz">Kuis</button>
        </div>

        <div id="dash" class="sub-panel">
          <div class="kpis">
            <div class="kpi"><div class="label">Rata-rata Permintaan</div><div id="kpi-avg-demand" class="value">—</div></div>
            <div class="kpi"><div class="label">Lead Time MRP (maks)</div><div id="kpi-max-lead" class="value">—</div></div>
            <div class="kpi"><div class="label">Total Nilai Penggunaan</div><div id="kpi-annual-value" class="value">—</div></div>
          </div>
          <div class="charts">
            <canvas id="chart-demand" height="120"></canvas>
          </div>
          <div id="dash-summary" class="summary"></div>
        </div>

        <div id="forecast-mod" class="sub-panel hidden">
          <h3>Peramalan</h3>
          <div class="columns">
            <div>
              <div id="demand-list" class="small"></div>
              <button id="add-period">Tambah</button>
              <button id="edit-demand">Edit CSV</button>
            </div>
            <div>
              <label>Window SMA <input id="fc-window" type="number" min="2" max="8" value="3"></label>
              <label>Bobot WMA <input id="fc-weights" type="text" value="0.5,0.3,0.2"></label>
              <button id="fc-run">Hitung</button>
              <button id="fc-clear">Bersihkan</button>
            </div>
            <div>
              <div id="forecast-metrics"></div>
              <canvas id="chart-forecast" height="120"></canvas>
              <pre id="forecast-log" class="log"></pre>
            </div>
          </div>
        </div>

        <div id="mrp-mod" class="sub-panel hidden">
          <h3>MRP Sederhana</h3>
          <div id="items-table" class="small"></div>
          <button id="mrp-run">Jalankan MRP</button>
          <div id="mrp-table"></div>
          <pre id="mrp-log" class="log"></pre>
        </div>

        <div id="schedule-mod" class="sub-panel hidden">
          <h3>Penjadwalan (FCFS)</h3>
          <div id="jobs-table" class="small"></div>
          <button id="sch-run">Jadwalkan</button>
          <div id="gantt"></div>
          <pre id="sch-log" class="log"></pre>
        </div>

        <div id="abc-mod" class="sub-panel hidden">
          <h3>Kontrol Persediaan (ABC)</h3>
          <div id="inv-table" class="small"></div>
          <button id="abc-run">Klasifikasi</button>
          <div id="abc-result"></div>
          <pre id="abc-log" class="log"></pre>
        </div>

        <div id="quiz-mod" class="sub-panel hidden">
          <h3>Kuis Cepat</h3>
          <div id="quiz-box"></div>
          <button id="quiz-check">Periksa</button>
          <button id="quiz-reset">Reset</button>
          <div id="quiz-score"></div>
        </div>
      </section>

      <!-- DATA -->
      <section id="data" class="tab-panel hidden">
        <h2>Data Demo</h2>
        <select id="dataset-select">
          <option value="">-- Pilih dataset --</option>
          <option value="tas">Tas Rajut</option>
          <option value="sabun">Sabun Cair</option>
          <option value="kue">Kue Kering</option>
          <option value="kayu">Kerajinan Kayu</option>
          <option value="konveksi">Konveksi Kaos</option>
          <option value="keripik">Keripik</option>
        </select>
        <div class="editor-wrap">
          <textarea id="json-editor"></textarea>
        </div>
        <div class="data-actions">
          <button id="load-dataset">Muat</button>
          <button id="save-json">Simpan ke aplikasi</button>
          <button id="reset-json">Reset Default</button>
          <div id="json-error" class="error"></div>
        </div>
      </section>
    </main>

    <footer class="footer">© 2025 — Materi PKK Perencanaan Produksi</footer>
  </div>

  <!-- Script lokal -->
  <script src="app.js"></script>
</body>
</html>
