<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Belajar Perencanaan Produksi</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* kecilkan scrollbar pada editor JSON */
    .json-editor { min-height:10rem; max-height:18rem; overflow:auto; font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Courier New", monospace; }
    .gantt-track { height:2.25rem; }
    .gantt-bar { height:1.5rem; border-radius:6px; display:inline-flex; align-items:center; padding:0 .5rem; color:#042c54; font-weight:600; }
  </style>
</head>
<body class="bg-slate-50 text-slate-800">
  <div class="max-w-6xl mx-auto p-6">
    <header class="mb-6">
      <div class="flex items-center gap-4">
        <div class="rounded-lg bg-gradient-to-br from-sky-400 to-indigo-500 text-white px-3 py-2 font-bold">PP</div>
        <div>
          <h1 class="text-2xl font-semibold">Aplikasi Pembelajaran Perencanaan Produksi</h1>
          <p class="text-sm text-slate-600">Teori • Praktik • Kuis — responsive dengan Tailwind CSS</p>
        </div>
      </div>
    </header>

    <!-- NAV -->
    <nav class="mb-4">
      <div class="flex flex-wrap gap-2">
        <button data-tab="dashboard" class="tab-btn bg-white border px-3 py-1 rounded shadow-sm">Dasbor</button>
        <button data-tab="forecast" class="tab-btn bg-white border px-3 py-1 rounded shadow-sm">Peramalan</button>
        <button data-tab="mrp" class="tab-btn bg-white border px-3 py-1 rounded shadow-sm">MRP</button>
        <button data-tab="schedule" class="tab-btn bg-white border px-3 py-1 rounded shadow-sm">Penjadwalan</button>
        <button data-tab="abc" class="tab-btn bg-white border px-3 py-1 rounded shadow-sm">Kontrol ABC</button>
        <button data-tab="quiz" class="tab-btn bg-white border px-3 py-1 rounded shadow-sm">Kuis</button>
        <button data-tab="data" class="tab-btn bg-white border px-3 py-1 rounded shadow-sm ml-auto text-sm">Data Demo (Edit)</button>
      </div>
    </nav>

    <main>
      <!-- DASHBOARD -->
      <section id="dashboard" class="tab-panel bg-white p-6 rounded shadow-sm">
        <h2 class="text-lg font-semibold mb-3">Dasbor Ringkas</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div class="p-4 border rounded">
            <div class="text-sm text-slate-500">Rata-rata Permintaan</div>
            <div id="kpi-avg-demand" class="text-2xl font-bold text-sky-600">—</div>
          </div>
          <div class="p-4 border rounded">
            <div class="text-sm text-slate-500">Lead Time MRP (maks)</div>
            <div id="kpi-max-lead" class="text-2xl font-bold text-indigo-600">—</div>
          </div>
          <div class="p-4 border rounded">
            <div class="text-sm text-slate-500">Total Nilai Penggunaan Persediaan</div>
            <div id="kpi-annual-value" class="text-2xl font-bold text-emerald-600">—</div>
          </div>
        </div>
      </section>

      <!-- FORECAST -->
      <section id="forecast" class="tab-panel hidden bg-white p-6 mt-4 rounded shadow-sm">
        <div class="flex flex-col md:flex-row gap-4">
          <div class="md:w-1/3 border rounded p-4">
            <h3 class="font-semibold mb-2">Data Permintaan</h3>
            <div id="demand-list" class="text-sm text-slate-700 mb-3"></div>
            <button id="add-period" class="px-3 py-1 bg-sky-600 text-white rounded text-sm">Tambah Periode</button>
            <button id="edit-demand" class="px-3 py-1 bg-white border rounded text-sm ml-2">Edit (CSV)</button>
          </div>

          <div class="md:w-1/3 border rounded p-4">
            <h3 class="font-semibold mb-2">Pengaturan</h3>
            <label class="block text-sm mb-2">Window SMA
              <input id="fc-window" type="number" min="2" max="8" value="3" class="mt-1 w-full border rounded p-1" />
            </label>
            <label class="block text-sm mb-2">Bobot WMA (terbaru→terlama, pisahkan koma)
              <input id="fc-weights" type="text" value="0.5,0.3,0.2" class="mt-1 w-full border rounded p-1" />
            </label>
            <div class="mt-2 flex gap-2">
              <button id="fc-run" class="px-3 py-1 bg-emerald-600 text-white rounded">Hitung</button>
              <button id="fc-clear" class="px-3 py-1 bg-white border rounded">Bersihkan</button>
            </div>
          </div>

          <div class="md:w-1/3 border rounded p-4">
            <h3 class="font-semibold mb-2">Hasil & Metrik</h3>
            <div id="forecast-result" class="text-sm text-slate-700 mb-2"></div>
            <div id="forecast-metrics" class="text-sm"></div>
            <details class="mt-2"><summary class="text-sm text-slate-600">Log Perhitungan</summary>
              <pre id="forecast-log" class="text-xs p-2 bg-slate-50 rounded mt-2 max-h-40 overflow-auto"></pre>
            </details>
          </div>
        </div>
      </section>

      <!-- MRP -->
      <section id="mrp" class="tab-panel hidden bg-white p-6 mt-4 rounded shadow-sm">
        <div class="flex flex-col md:flex-row gap-4">
          <div class="md:w-1/2 border rounded p-4">
            <h3 class="font-semibold mb-2">Item & BOM</h3>
            <div id="items-table" class="text-sm mb-3"></div>
            <div class="flex gap-2">
              <button id="mrp-run" class="px-3 py-1 bg-indigo-600 text-white rounded">Jalankan MRP</button>
              <button id="mrp-edit" class="px-3 py-1 bg-white border rounded">Edit Item (JSON)</button>
            </div>
          </div>
          <div class="md:w-1/2 border rounded p-4">
            <h3 class="font-semibold mb-2">Hasil MRP</h3>
            <div id="mrp-table" class="text-sm"></div>
            <details class="mt-2"><summary class="text-sm text-slate-600">Log MRP</summary>
              <pre id="mrp-log" class="text-xs p-2 bg-slate-50 rounded mt-2 max-h-40 overflow-auto"></pre>
            </details>
          </div>
        </div>
      </section>

      <!-- SCHEDULE -->
      <section id="schedule" class="tab-panel hidden bg-white p-6 mt-4 rounded shadow-sm">
        <div class="flex flex-col md:flex-row gap-4">
          <div class="md:w-1/3 border rounded p-4">
            <h3 class="font-semibold mb-2">Job / Work Center</h3>
            <div id="jobs-table" class="text-sm mb-3"></div>
            <div class="flex gap-2">
              <select id="sch-rule" class="border p-1 rounded">
                <option value="FCFS">FCFS</option>
              </select>
              <button id="sch-run" class="px-3 py-1 bg-sky-600 text-white rounded">Jadwalkan</button>
              <button id="sch-edit" class="px-3 py-1 bg-white border rounded">Edit Job (JSON)</button>
            </div>
          </div>
          <div class="md:w-2/3 border rounded p-4">
            <h3 class="font-semibold mb-2">Gantt (sederhana)</h3>
            <div id="gantt" class="space-y-2"></div>
            <div id="sch-metrics" class="text-sm mt-2"></div>
            <details class="mt-2"><summary class="text-sm text-slate-600">Log Penjadwalan</summary>
              <pre id="sch-log" class="text-xs p-2 bg-slate-50 rounded mt-2 max-h-40 overflow-auto"></pre>
            </details>
          </div>
        </div>
      </section>

      <!-- ABC -->
      <section id="abc" class="tab-panel hidden bg-white p-6 mt-4 rounded shadow-sm">
        <div class="md:flex md:gap-4">
          <div class="md:w-1/2 border rounded p-4">
            <h3 class="font-semibold mb-2">Data Persediaan</h3>
            <div id="inv-table" class="text-sm mb-3"></div>
            <div class="flex gap-2">
              <button id="abc-run" class="px-3 py-1 bg-emerald-600 text-white rounded">Klasifikasi ABC</button>
              <button id="abc-edit" class="px-3 py-1 bg-white border rounded">Edit Persediaan (JSON)</button>
            </div>
          </div>
          <div class="md:w-1/2 border rounded p-4">
            <h3 class="font-semibold mb-2">Hasil ABC & Saran</h3>
            <div id="abc-result" class="text-sm"></div>
            <details class="mt-2"><summary class="text-sm text-slate-600">Log ABC</summary>
              <pre id="abc-log" class="text-xs p-2 bg-slate-50 rounded mt-2 max-h-40 overflow-auto"></pre>
            </details>
          </div>
        </div>
      </section>

      <!-- QUIZ -->
      <section id="quiz" class="tab-panel hidden bg-white p-6 mt-4 rounded shadow-sm">
        <h3 class="font-semibold mb-3">Kuis Cepat (5 soal)</h3>
        <div id="quiz-box" class="space-y-3"></div>
        <div class="mt-3">
          <button id="quiz-check" class="px-3 py-1 bg-indigo-600 text-white rounded">Periksa Jawaban</button>
          <button id="quiz-reset" class="px-3 py-1 bg-white border rounded ml-2">Reset</button>
          <div id="quiz-score" class="mt-2 text-sm"></div>
        </div>
      </section>

      <!-- DATA DEMO -->
      <section id="data" class="tab-panel hidden bg-white p-6 mt-4 rounded shadow-sm">
        <h3 class="font-semibold mb-3">Data Demo (Edit JSON)</h3>
        <p class="text-sm text-slate-600 mb-2">Ubah data mentah di bawah lalu tekan Simpan. Perubahan akan memengaruhi semua modul.</p>
        <textarea id="json-editor" class="json-editor w-full border rounded p-2"></textarea>
        <div class="mt-2 flex gap-2">
          <button id="save-json" class="px-3 py-1 bg-sky-600 text-white rounded">Simpan</button>
          <button id="reset-json" class="px-3 py-1 bg-white border rounded">Reset Default</button>
        </div>
        <div id="json-error" class="text-red-600 text-sm mt-2"></div>
      </section>
    </main>

    <footer class="mt-6 text-sm text-slate-500">© 2025 — Aplikasi Pembelajaran Perencanaan Produksi</footer>
  </div>

  <script src="app.js"></script>
</body>
</html>
